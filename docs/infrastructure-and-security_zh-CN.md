<p align="right">
  <a href="./infrastructure-and-security.md">English</a> | <a href="./infrastructure-and-security_zh-CN.md">简体中文</a>
</p>

# 深入了解：基础设施与安全

我的基础设施理念建立在三大支柱之上：**稳定、简单、安全**。该层是所有其他服务的基础，因此每个选择都优先考虑长期可靠性和最小的维护开销。

---

### 🚪 网关 (Gateway): Cloudflare Tunnels

**选型理由**: 对于一个真正私密的数字城堡而言，首要目标不仅是保护服务，更是让服务器本身变得“隐形”。我选择了 Cloudflare Tunnels 而非 NPM 或 Caddy 等传统反向代理，因为它完美地体现了“零信任”安全模型。它允许我在服务器防火墙上不打开任何入站端口的情况下，将服务暴露给互联网。

**核心优势**:
*   **零攻击面基础设施**: `cloudflared` 守护进程会创建一个安全的、仅出站的连接到 Cloudflare 的网络。这意味着我的服务器**没有任何开放端口**（如 80 或 443），使其对公网扫描器完全隐形，并能免疫如 DDoS 等直接的网络攻击。
*   **IP地址混淆**: 我服务器的真实 IP 地址永远不会暴露给公众。所有的 DNS 记录都指向 Cloudflare，提供了一层强大的匿名性和保护。
*   **集成的访问控制**: Cloudflare Tunnels 与 **Cloudflare Access** 无缝集成，允许我在任何应用前叠加一层强大的、基于身份的认证（例如，邮件 PIN 码、Google/GitHub SSO）。这确保了只有我本人才能接触到敏感服务的登录页面。

**替代品考量**:
*   `Nginx Proxy Manager`/`Caddy`: 对于传统的 IP 暴露部署模式，它们是优秀的反向代理。然而，它们都要求在防火墙上打开端口，这从根本上违背了构建一个真正隐藏的、零信任环境的目标。对于需要极致隐私和安全的服务，Cloudflare Tunnels 的“隐形服务器”模型是无与伦比的。

---

### 🔑 金库 (Vault): Vaultwarden

**选型理由**: 在自托管环境中，密码管理器是不可或缺的。Vaultwarden 是一个用Rust编写的非官方Bitwarden API实现。它以**极低的资源消耗**提供了官方服务器99%的核心功能。

**核心优势**:
*   **极致轻量**: 与官方基于.NET的服务器相比，Vaultwarden的内存和CPU占用几乎可以忽略不计，使其成为资源受限VPS环境的完美选择。
*   **完全兼容**: 它与所有官方的Bitwarden客户端（浏览器扩展、桌面应用和移动应用）无缝协作，确保了流畅的用户体验。
*   **数据主权**: 我的所有密码都经过端到端加密，并完全存储在我自己的服务器上，彻底切断了我对第三方密码管理服务的依赖。

---

### 🔭 瞭望塔 (Watchtower): Uptime Kuma

**选型理由**: 一个运行中的系统必须是一个可观测的系统。Uptime Kuma 以其**美观、直观的界面**和**极其简单的配置**脱颖而出。

**核心优势**:
*   **轻松设置**: 添加一个新的监控项（HTTP、Ping、端口等）非常直接，完全通过UI完成。
*   **丰富的通知渠道**: 它支持数十种通知方式（Telegram、Discord、电子邮件等），确保在服务不可用时我能第一时间知晓。
*   **美观的状态页**: 它允许创建公共或私有的状态页面，以优美的方式可视化所有服务的健康状况——这是一个非常令人满足的功能。
---

### 🚢 舵手 (Helm): Portainer

**选型理由**: 尽管命令行很强大，但一个健壮的图形界面对于日常管理、快速排错和清晰地概览环境而言是无价的。Portainer 是Docker Web UI领域的事实标准，它提供了对容器生态系统每个方面的全面控制。

**核心优势**:
*   **完整的环境管理**: 它提供了一个单一的玻璃面板来管理容器、镜像、数据卷、网络，以及最重要的——堆栈 (docker-compose 文件)。
*   **简化的操作**: 拉取镜像、重启容器、检查日志或进入容器控制台等操作，都变成了在Web浏览器中的简单点击，这对于执行快速任务而言，远比SSH登录并键入命令要高效。
*   **堆栈管理**: 它能够直接从UI部署、编辑和管理 `docker-compose.yml` 文件，这是一个杀手级功能，极大地简化了整个应用程序生命周期的管理流程。
*   **资源监控**: 内置的、针对每个容器的实时状态统计，帮助我即时识别哪些服务正在消耗最多的CPU或内存。